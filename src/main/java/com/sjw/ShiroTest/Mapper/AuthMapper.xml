<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sjw.ShiroTest.pojo.UserPojo">
	<insert id="createUser" parameterType="User">
		INSERT INTO USER(USERNAME,PASSWORD,ACCESS,CREATE_DATE,MODIFIED_DATE) VALUES(
			#{username,jdbcType=VARCHAR},#{password,jdbcType=VARCHAR},
			#{access_level,jdbcType=INTEGER},#{create_date,jdbcType=DATE},
			#{modified_date,jdbcType=DATE}
		);
		INSERT INTO USER_ROLE(USER_ID,ROLE_ID) VALUES((SELECT ID FROM USER WHERE USERNAME=#{username,jdbcType=VARCHAR}),
		(SELECT ID FROM ROLE WHERE NAME=#{role,jdbcType=VARCHAR}))
	</insert>	
</mapper>